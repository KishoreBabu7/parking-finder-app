<div class="user-container">
  <div class="form-header">
    <h2 *ngIf="isLoginMode">Login</h2>
    <h2 *ngIf="!isLoginMode">Sign Up</h2>
  </div>

  <form (ngSubmit)="onSubmit()" #userForm="ngForm">
    <!-- Username field shown only in registration mode -->
    <div class="form-group" *ngIf="!isLoginMode">
      <label for="username">Username:</label>
      <input type="text" id="username" [(ngModel)]="username" name="username" required>
    </div>

    <!-- Email field shown in both modes -->
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" [(ngModel)]="email" name="email" required>
    </div>

    <!-- Password field shown in both modes -->
    <div class="form-group">
      <label for="password">Password:</label>
      <input type="password" id="password" [(ngModel)]="password" name="password" required>
    </div>

    <!-- Confirm Password field shown only in registration mode -->
    <div class="form-group" *ngIf="!isLoginMode">
      <label for="confirm-password">Confirm Password:</label>
      <input type="password" id="confirm-password" [(ngModel)]="confirmPassword" name="confirmPassword" required>
    </div>

    <!-- Mobile Number field shown only in registration mode -->
    <div class="form-group" *ngIf="!isLoginMode">
      <label for="mobile-number">Mobile Number:</label>
      <input type="tel" id="mobile-number" [(ngModel)]="mobileNumber" name="mobileNumber" required>
    </div>

    <!-- Dynamic vehicle entries shown only in registration mode -->
    <div *ngIf="!isLoginMode">
      <h3>Vehicle Information</h3>
      <div *ngFor="let vehicle of vehicles; let i = index" class="vehicle-entry">
        <div class="form-group">
          <label for="vehicle-regno-{{ i }}">Vehicle Reg. No.:</label>
          <input type="text" id="vehicle-regno-{{ i }}" [(ngModel)]="vehicle.vehicleRegNo" name="vehicleRegNo{{ i }}" required>
        </div>

        <div class="form-group">
          <label for="vehicle-type-{{ i }}">Vehicle Type:</label>
          <select id="vehicle-type-{{ i }}" [(ngModel)]="vehicle.vehicleType" name="vehicleType{{ i }}" required>
            <option value="" disabled>Select vehicle type</option>
            <option value="2-wheeler">2 Wheeler</option>
            <option value="3-wheeler">3 Wheeler</option>
            <option value="4-wheeler">4 Wheeler</option>
          </select>
        </div>

        <!-- Remove vehicle button, only show if more than one vehicle entry -->
        <button type="button" (click)="removeVehicle(i)" *ngIf="vehicles.length > 1" class="remove-vehicle-button">
          Remove Vehicle
        </button>
      </div>

      <button type="button" (click)="addAnotherVehicle()" class="add-vehicle-button">Add Another Vehicle</button>
    </div>

    <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>

    <div class="form-footer">
      <p *ngIf="isLoginMode">Don't have an account? 
        <button type="button" (click)="onSwitchMode()" class="switch-link">Register</button>
      </p>
      <p *ngIf="!isLoginMode">Already have an account? 
        <button type="button" (click)="onSwitchMode()" class="switch-link">Login</button>
      </p>
      <button type="submit" class="submit-button">Submit</button>
    </div>
  </form>
</div>
